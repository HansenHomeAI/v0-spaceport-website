============================================================	🚀 SPACEPORT OPENSFM GPS-CONSTRAINED SfM PROCESSING	============================================================	📅 Started at: Thu Jul  3 04:23:02 UTC 2025	🔧 Pipeline: OpenSfM with GPS constraints	📍 GPS Enhancement: Drone flight path integration	🎯 Output: COLMAP-compatible format for 3DGS	============================================================	🔍 Verifying environment...	Python 3.9.23	[notice] A new release of pip is available: 23.0.1 -> 25.1.1	[notice] To update, run: pip install --upgrade pip	[notice] A new release of pip is available: 23.0.1 -> 25.1.1	[notice] To update, run: pip install --upgrade pip	[notice] A new release of pip is available: 23.0.1 -> 25.1.1	[notice] To update, run: pip install --upgrade pip	✅ Environment verification completed	🔍 Verifying required scripts...	✅ Found: run_opensfm_gps.py	✅ Found: gps_processor.py	✅ Found: colmap_converter.py	✅ Found: config_template.yaml	📁 Input directory: /opt/ml/processing/input	📁 Output directory: /opt/ml/processing/output	🔍 Input directory contents:	total 393728	drwxr-xr-x 3 root root      4096 Jul  3 04:23 .	drwxr-xr-x 4 root root      4096 Jul  3 04:06 ..	-rw-r--r-- 1 root root 403160843 Jul  3 04:22 1751413909023-l2zkyj-Battery-1.zip	drwxr-xr-x 2 root root      4096 Jul  3 04:22 gps	📦 ZIP files found: 1	🛰️ CSV files found: 1	✅ GPS flight path data available - will use GPS-constrained reconstruction	============================================================	🚀 LAUNCHING OPENSFM GPS PROCESSOR	============================================================	🔧 Executing OpenSfM GPS-constrained reconstruction...	2025-07-03 04:23:04,234 - INFO - 🏗️ Created workspace: /tmp/opensfm__t__qo7r	2025-07-03 04:23:04,234 - INFO - 📦 Extracting ZIP: /opt/ml/processing/input/1751413909023-l2zkyj-Battery-1.zip	2025-07-03 04:23:05,064 - INFO - 📷 Extracted 97 images	2025-07-03 04:23:05,064 - INFO - 🛰️ Processing GPS data from: /opt/ml/processing/input/gps/gps-flight-path-20250703-042153.csv	2025-07-03 04:23:05,064 - INFO - 🚁 Initializing Advanced 3D Path Processor	2025-07-03 04:23:05,064 - INFO - 📂 CSV: /opt/ml/processing/input/gps/gps-flight-path-20250703-042153.csv	2025-07-03 04:23:05,064 - INFO - 📷 Images: /tmp/opensfm__t__qo7r/images	2025-07-03 04:23:05,067 - INFO - ✅ Mapped column 'latitude' → 'latitude'	2025-07-03 04:23:05,068 - INFO - ✅ Mapped column 'longitude' → 'longitude'	2025-07-03 04:23:05,068 - INFO - ✅ Mapped column 'altitude(ft)' → 'altitude'	2025-07-03 04:23:05,068 - INFO - ✅ Mapped column 'heading(deg)' → 'heading'	2025-07-03 04:23:05,068 - INFO - ✅ Mapped column 'gimbalpitchangle' → 'gimbal_pitch'	2025-07-03 04:23:05,068 - INFO - ✅ Mapped column 'photo_timeinterval' → 'photo_interval'	2025-07-03 04:23:05,069 - INFO - ✅ Mapped column 'photo_distinterval' → 'distance_interval'	2025-07-03 04:23:05,069 - INFO - 📏 Converted altitude from feet to meters	2025-07-03 04:23:05,069 - INFO - 📸 Using CSV photo interval: 3.0 seconds	2025-07-03 04:23:05,070 - WARNING - ⚠️ Using fallback speed: 17.9 mph (8.0 m/s)	2025-07-03 04:23:05,070 - INFO - ⏱️ Using time-based photo distribution: 24.0m intervals	2025-07-03 04:23:05,070 - INFO - 📏 Using CSV distance interval: 0.0m	2025-07-03 04:23:05,070 - INFO - ✅ Loaded 10 waypoints	2025-07-03 04:23:05,070 - INFO - 📊 Coverage: 41.731660 to 41.734230 lat	2025-07-03 04:23:05,071 - INFO - 📊 Altitude: 39.6m to 118.0m	2025-07-03 04:23:05,071 - INFO - 🌍 Local coordinate system:	2025-07-03 04:23:05,071 - INFO -    Origin: 41.732850°, -111.835173°, 70.0m	2025-07-03 04:23:05,071 - INFO -    UTM Zone: 12T	2025-07-03 04:23:05,106 - INFO - 🛤️ Built 3D flight path:	2025-07-03 04:23:05,106 - INFO -    Segments: 9	2025-07-03 04:23:05,106 - INFO -    Total length: 2731.8m	2025-07-03 04:23:05,106 - INFO -    Curved segments: 9	2025-07-03 04:23:05,106 - INFO -    Estimated flight time: 341.4s	2025-07-03 04:23:06,901 - INFO - ✅ Using EXIF timestamps for photo ordering	2025-07-03 04:23:06,901 - INFO - 📸 Ordered 97 photos	2025-07-03 04:23:06,901 - INFO -    First: DJI_0579.JPG	2025-07-03 04:23:06,901 - INFO -    Last: DJI_0675.JPG	2025-07-03 04:23:06,901 - INFO - 📐 Time-based photo mapping parameters:	2025-07-03 04:23:06,901 - INFO -    Photos: 97	2025-07-03 04:23:06,901 - INFO -    Speed: 8.0 m/s (from CSV)	2025-07-03 04:23:06,901 - INFO -    Interval: 3.0 s (from CSV)	2025-07-03 04:23:06,901 - INFO -    Calculated spacing: 24.0 m	2025-07-03 04:23:06,901 - INFO - ✅ Using time-based distribution (CSV parameters)	2025-07-03 04:23:06,947 - INFO - ✅ Mapped 97 photos to 3D positions	2025-07-03 04:23:06,952 - INFO - ✅ Generated OpenSfM files in /tmp/opensfm__t__qo7r/opensfm	2025-07-03 04:23:06,952 - INFO -    - exif_overrides.json	2025-07-03 04:23:06,952 - INFO -    - reference_lla.json	2025-07-03 04:23:06,952 - INFO -    - reference.txt	2025-07-03 04:23:06,952 - INFO -    - gps_priors.json	2025-07-03 04:23:06,952 - INFO - 📊 GPS Processing Summary:	2025-07-03 04:23:06,952 - INFO -    Photos: 97	2025-07-03 04:23:06,952 - INFO -    Path length: 2731.8m	2025-07-03 04:23:06,952 - INFO -    Photo spacing: 24.0m	2025-07-03 04:23:06,952 - INFO -    Confidence: 0.90	2025-07-03 04:23:06,953 - INFO - ✅ Created OpenSfM config: /tmp/opensfm__t__qo7r/opensfm/config.yaml	2025-07-03 04:23:07,156 - INFO - ✅ Copied 97 images to OpenSfM	2025-07-03 04:23:07,156 - INFO - 🔄 Running OpenSfM reconstruction...	2025-07-03 04:23:07,156 - INFO - 🔧 Extract image metadata...	2025-07-03 04:23:12,860 - INFO - ✅ Extract image metadata completed	2025-07-03 04:23:12,860 - INFO - 🔧 Detect features...	2025-07-03 04:26:15,585 - INFO - ✅ Detect features completed	2025-07-03 04:26:15,586 - INFO - 🔧 Match features...	2025-07-03 04:26:16,736 - ERROR - ❌ OpenSfM match_features failed:	2025-07-03 04:26:16,736 - ERROR -    stdout: 	2025-07-03 04:26:16,736 - ERROR -    stderr: Traceback (most recent call last):
  File "/opt/OpenSfM/bin/opensfm_main.py", line 34, in <module>
    main()  # pragma: no cover
  File "/opt/OpenSfM/bin/opensfm_main.py", line 26, in main
    commands.command_runner(
  File "/opt/OpenSfM/opensfm/commands/command_runner.py", line 45, in command_runner
    command.run(data, args)
  File "/opt/OpenSfM/opensfm/commands/command.py", line 16, in run
    self.run_impl(data, args)
  File "/opt/OpenSfM/opensfm/commands/match_features.py", line 15, in run_impl
    match_features.run_dataset(dataset)
  File "/opt/OpenSfM/opensfm/actions/match_features.py", line 15, in run_dataset
    pairs_matches, preport = matching.match_images(data, {}, images, images)
  File "/opt/OpenSfM/opensfm/matching.py", line 48, in match_images
    pairs, preport = pairs_selection.match_candidates_from_metadata(
  File "/opt/OpenSfM/opensfm/pairs_selection.py", line 609, in match_candidates_from_metadata
    reference = data.load_reference()
  File "/opt/OpenSfM/opensfm/dataset.py", line 459, in load_reference
    lla["latitude"], lla["longitude"], lla["altitude"]	KeyError: 'latitude'	2025-07-03 04:26:16,736 - ERROR - ❌ OpenSfM reconstruction failed	2025-07-03 04:26:16,917 - INFO - 🧹 Cleanup completed	2025-07-03 04:26:16,917 - INFO - 🏁 Pipeline finished with exit code: 1
