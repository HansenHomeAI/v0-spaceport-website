============================================================	ğŸš€ SPACEPORT OPENSFM GPS-CONSTRAINED SfM PROCESSING	============================================================	ğŸ“… Started at: Thu Jul  3 03:14:07 UTC 2025	ğŸ”§ Pipeline: OpenSfM with GPS constraints	ğŸ“ GPS Enhancement: Drone flight path integration	ğŸ¯ Output: COLMAP-compatible format for 3DGS	============================================================	ğŸ” Verifying environment...	Python 3.9.23	[notice] A new release of pip is available: 23.0.1 -> 25.1.1	[notice] To update, run: pip install --upgrade pip	[notice] A new release of pip is available: 23.0.1 -> 25.1.1	[notice] To update, run: pip install --upgrade pip	[notice] A new release of pip is available: 23.0.1 -> 25.1.1	[notice] To update, run: pip install --upgrade pip	âœ… Environment verification completed	ğŸ” Verifying required scripts...	âœ… Found: run_opensfm_gps.py	âœ… Found: gps_processor.py	âœ… Found: colmap_converter.py	âœ… Found: config_template.yaml	ğŸ“ Input directory: /opt/ml/processing/input	ğŸ“ Output directory: /opt/ml/processing/output	ğŸ” Input directory contents:	total 393728	drwxr-xr-x 3 root root      4096 Jul  3 03:14 .	drwxr-xr-x 4 root root      4096 Jul  3 02:58 ..	-rw-r--r-- 1 root root 403160843 Jul  3 03:13 1751413909023-l2zkyj-Battery-1.zip	drwxr-xr-x 2 root root      4096 Jul  3 03:13 gps	ğŸ“¦ ZIP files found: 1	ğŸ›°ï¸ CSV files found: 1	âœ… GPS flight path data available - will use GPS-constrained reconstruction	============================================================	ğŸš€ LAUNCHING OPENSFM GPS PROCESSOR	============================================================	ğŸ”§ Executing OpenSfM GPS-constrained reconstruction...	2025-07-03 03:14:09,176 - INFO - ğŸ—ï¸ Created workspace: /tmp/opensfm_e4du1u7u	2025-07-03 03:14:09,176 - INFO - ğŸ“¦ Extracting ZIP: /opt/ml/processing/input/1751413909023-l2zkyj-Battery-1.zip	2025-07-03 03:14:09,925 - INFO - ğŸ“· Extracted 97 images	2025-07-03 03:14:09,926 - INFO - ğŸ›°ï¸ Processing GPS data from: /opt/ml/processing/input/gps/gps-flight-path-20250703-031257.csv	2025-07-03 03:14:09,926 - INFO - ğŸš Initializing Advanced 3D Path Processor	2025-07-03 03:14:09,926 - INFO - ğŸ“‚ CSV: /opt/ml/processing/input/gps/gps-flight-path-20250703-031257.csv	2025-07-03 03:14:09,926 - INFO - ğŸ“· Images: /tmp/opensfm_e4du1u7u/images	2025-07-03 03:14:09,929 - INFO - âœ… Mapped column 'latitude' â†’ 'latitude'	2025-07-03 03:14:09,929 - INFO - âœ… Mapped column 'longitude' â†’ 'longitude'	2025-07-03 03:14:09,929 - INFO - âœ… Mapped column 'altitude(ft)' â†’ 'altitude'	2025-07-03 03:14:09,929 - INFO - âœ… Mapped column 'heading(deg)' â†’ 'heading'	2025-07-03 03:14:09,929 - INFO - âœ… Mapped column 'gimbalpitchangle' â†’ 'gimbal_pitch'	2025-07-03 03:14:09,930 - INFO - âœ… Mapped column 'photo_timeinterval' â†’ 'photo_interval'	2025-07-03 03:14:09,930 - INFO - âœ… Mapped column 'photo_distinterval' â†’ 'distance_interval'	2025-07-03 03:14:09,930 - INFO - ğŸ“ Converted altitude from feet to meters	2025-07-03 03:14:09,931 - INFO - ğŸ“¸ Using CSV photo interval: 3.0 seconds	2025-07-03 03:14:09,931 - WARNING - âš ï¸ Using fallback speed: 17.9 mph (8.0 m/s)	2025-07-03 03:14:09,931 - INFO - â±ï¸ Using time-based photo distribution: 24.0m intervals	2025-07-03 03:14:09,931 - INFO - ğŸ“ Using CSV distance interval: 0.0m	2025-07-03 03:14:09,931 - INFO - âœ… Loaded 10 waypoints	2025-07-03 03:14:09,931 - INFO - ğŸ“Š Coverage: 41.731660 to 41.734230 lat	2025-07-03 03:14:09,932 - INFO - ğŸ“Š Altitude: 39.6m to 118.0m	2025-07-03 03:14:09,932 - INFO - ğŸŒ Local coordinate system:	2025-07-03 03:14:09,932 - INFO -    Origin: 41.732850Â°, -111.835173Â°, 70.0m	2025-07-03 03:14:09,932 - INFO -    UTM Zone: 12T	2025-07-03 03:14:09,966 - INFO - ğŸ›¤ï¸ Built 3D flight path:	2025-07-03 03:14:09,966 - INFO -    Segments: 9	2025-07-03 03:14:09,966 - INFO -    Total length: 2731.8m	2025-07-03 03:14:09,966 - INFO -    Curved segments: 9	2025-07-03 03:14:09,966 - INFO -    Estimated flight time: 341.4s	2025-07-03 03:14:11,713 - INFO - âœ… Using EXIF timestamps for photo ordering	2025-07-03 03:14:11,713 - INFO - ğŸ“¸ Ordered 97 photos	2025-07-03 03:14:11,713 - INFO -    First: DJI_0579.JPG	2025-07-03 03:14:11,713 - INFO -    Last: DJI_0675.JPG	2025-07-03 03:14:11,713 - INFO - ğŸ“ Time-based photo mapping parameters:	2025-07-03 03:14:11,713 - INFO -    Photos: 97	2025-07-03 03:14:11,714 - INFO -    Speed: 8.0 m/s (from CSV)	2025-07-03 03:14:11,714 - INFO -    Interval: 3.0 s (from CSV)	2025-07-03 03:14:11,714 - INFO -    Calculated spacing: 24.0 m	2025-07-03 03:14:11,714 - INFO - âœ… Using time-based distribution (CSV parameters)	2025-07-03 03:14:11,759 - INFO - âœ… Mapped 97 photos to 3D positions	2025-07-03 03:14:11,761 - ERROR - âŒ GPS processing failed: 'heading'	2025-07-03 03:14:11,762 - WARNING - âš ï¸ Continuing without GPS priors	2025-07-03 03:14:11,763 - INFO - âœ… Created OpenSfM config: /tmp/opensfm_e4du1u7u/opensfm/config.yaml	2025-07-03 03:14:11,960 - INFO - âœ… Copied 97 images to OpenSfM	2025-07-03 03:14:11,960 - INFO - ğŸ”„ Running OpenSfM reconstruction...	2025-07-03 03:14:11,960 - INFO - ğŸ”§ Extract image metadata...	2025-07-03 03:14:17,562 - INFO - âœ… Extract image metadata completed	2025-07-03 03:14:17,562 - INFO - ğŸ”§ Detect features...	2025-07-03 03:17:16,409 - INFO - âœ… Detect features completed	2025-07-03 03:17:16,409 - INFO - ğŸ”§ Match features...	2025-07-03 03:17:17,474 - ERROR - âŒ OpenSfM match_features failed:	2025-07-03 03:17:17,474 - ERROR -    stdout: 	2025-07-03 03:17:17,474 - ERROR -    stderr: Traceback (most recent call last):
  File "/opt/OpenSfM/bin/opensfm_main.py", line 34, in <module>
    main()  # pragma: no cover
  File "/opt/OpenSfM/bin/opensfm_main.py", line 26, in main
    commands.command_runner(
  File "/opt/OpenSfM/opensfm/commands/command_runner.py", line 45, in command_runner
    command.run(data, args)
  File "/opt/OpenSfM/opensfm/commands/command.py", line 16, in run
    self.run_impl(data, args)
  File "/opt/OpenSfM/opensfm/commands/match_features.py", line 15, in run_impl
    match_features.run_dataset(dataset)
  File "/opt/OpenSfM/opensfm/actions/match_features.py", line 15, in run_dataset
    pairs_matches, preport = matching.match_images(data, {}, images, images)
  File "/opt/OpenSfM/opensfm/matching.py", line 48, in match_images
    pairs, preport = pairs_selection.match_candidates_from_metadata(
  File "/opt/OpenSfM/opensfm/pairs_selection.py", line 609, in match_candidates_from_metadata
    reference = data.load_reference()
  File "/opt/OpenSfM/opensfm/dataset.py", line 459, in load_reference
    lla["latitude"], lla["longitude"], lla["altitude"]	KeyError: 'latitude'	2025-07-03 03:17:17,474 - ERROR - âŒ OpenSfM reconstruction failed	2025-07-03 03:17:17,655 - INFO - ğŸ§¹ Cleanup completed	2025-07-03 03:17:17,655 - INFO - ğŸ Pipeline finished with exit code: 1
