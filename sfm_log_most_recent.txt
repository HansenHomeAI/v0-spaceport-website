============================================================	🚀 SPACEPORT OPENSFM GPS-CONSTRAINED SfM PROCESSING	============================================================	📅 Started at: Tue Jul 15 04:11:27 UTC 2025	🔧 Pipeline: OpenSfM with GPS constraints	📍 GPS Enhancement: Drone flight path integration	🎯 Output: COLMAP-compatible format for 3DGS	============================================================	🔍 Verifying environment...	Python 3.9.23	[notice] A new release of pip is available: 23.0.1 -> 25.1.1	[notice] To update, run: pip install --upgrade pip	[notice] A new release of pip is available: 23.0.1 -> 25.1.1	[notice] To update, run: pip install --upgrade pip	[notice] A new release of pip is available: 23.0.1 -> 25.1.1	[notice] To update, run: pip install --upgrade pip	✅ Environment verification completed	🔍 Verifying required scripts...	✅ Found: run_opensfm_gps.py	✅ Found: gps_processor.py	✅ Found: colmap_converter.py	✅ Found: config_template.yaml	📁 Input directory: /opt/ml/processing/input	📁 Output directory: /opt/ml/processing/output	🔍 Input directory contents:	total 393728	drwxr-xr-x 3 root      root           4096 Jul 15 04:11 .	drwxr-xr-x 1 sagemaker sagemaker      4096 Jul  5 23:14 ..	-rw-r--r-- 1 root      root      403160843 Jul 15 04:11 1751413909023-l2zkyj-Battery-1.zip	drwxr-xr-x 2 root      root           4096 Jul 15 04:11 gps	📦 ZIP files found: 1	🛰️ CSV files found: 1	✅ GPS flight path data available - will use GPS-constrained reconstruction	============================================================	🚀 LAUNCHING OPENSFM GPS PROCESSOR	============================================================	🔧 Executing OpenSfM GPS-constrained reconstruction...	2025-07-15 04:11:29,911 - INFO - 🏗️ Created workspace: /tmp/opensfm_knsj2rue	2025-07-15 04:11:29,912 - INFO - 📦 Extracting ZIP: /opt/ml/processing/input/1751413909023-l2zkyj-Battery-1.zip	2025-07-15 04:11:30,743 - INFO - 📷 Extracted 97 images	2025-07-15 04:11:30,744 - INFO - 🛰️ Processing GPS data from: /opt/ml/processing/input/gps/gps-flight-path-20250715-041015.csv	2025-07-15 04:11:30,744 - INFO - 🚁 Initializing Advanced 3D Path Processor	2025-07-15 04:11:30,744 - INFO - 📂 CSV: /opt/ml/processing/input/gps/gps-flight-path-20250715-041015.csv	2025-07-15 04:11:30,744 - INFO - 📷 Images: /tmp/opensfm_knsj2rue/images	2025-07-15 04:11:30,747 - INFO - ✅ Mapped column 'latitude' → 'latitude'	2025-07-15 04:11:30,747 - INFO - ✅ Mapped column 'longitude' → 'longitude'	2025-07-15 04:11:30,747 - INFO - ✅ Mapped column 'altitude(ft)' → 'altitude'	2025-07-15 04:11:30,748 - INFO - ✅ Mapped column 'heading(deg)' → 'heading'	2025-07-15 04:11:30,748 - INFO - ✅ Mapped column 'gimbalpitchangle' → 'gimbal_pitch'	2025-07-15 04:11:30,748 - INFO - ✅ Mapped column 'photo_timeinterval' → 'photo_interval'	2025-07-15 04:11:30,748 - INFO - ✅ Mapped column 'photo_distinterval' → 'distance_interval'	2025-07-15 04:11:30,749 - INFO - 📏 Converted altitude from feet to meters	2025-07-15 04:11:30,749 - INFO - 📸 Using CSV photo interval: 3.0 seconds	2025-07-15 04:11:30,749 - WARNING - ⚠️ Using fallback speed: 17.9 mph (8.0 m/s)	2025-07-15 04:11:30,749 - INFO - ⏱️ Using time-based photo distribution: 24.0m intervals	2025-07-15 04:11:30,749 - INFO - 📏 Using CSV distance interval: 0.0m	2025-07-15 04:11:30,750 - INFO - ✅ Loaded 10 waypoints	2025-07-15 04:11:30,750 - INFO - 📊 Coverage: 41.731660 to 41.734230 lat	2025-07-15 04:11:30,750 - INFO - 📊 Altitude: 39.6m to 118.0m	2025-07-15 04:11:30,750 - INFO - 🌍 Local coordinate system:	2025-07-15 04:11:30,750 - INFO -    Origin: 41.732850°, -111.835173°, 70.0m	2025-07-15 04:11:30,751 - INFO -    UTM Zone: 12T	2025-07-15 04:11:30,786 - INFO - 🛤️ Built 3D flight path:	2025-07-15 04:11:30,786 - INFO -    Segments: 9	2025-07-15 04:11:30,786 - INFO -    Total length: 2731.8m	2025-07-15 04:11:30,786 - INFO -    Curved segments: 9	2025-07-15 04:11:30,786 - INFO -    Estimated flight time: 341.4s	2025-07-15 04:11:32,563 - INFO - ✅ Using EXIF timestamps for photo ordering	2025-07-15 04:11:32,564 - INFO - 📸 Ordered 97 photos	2025-07-15 04:11:32,564 - INFO -    First: DJI_0579.JPG	2025-07-15 04:11:32,564 - INFO -    Last: DJI_0675.JPG	2025-07-15 04:11:32,564 - INFO - 📐 Time-based photo mapping parameters:	2025-07-15 04:11:32,564 - INFO -    Photos: 97	2025-07-15 04:11:32,564 - INFO -    Speed: 8.0 m/s (from CSV)	2025-07-15 04:11:32,564 - INFO -    Interval: 3.0 s (from CSV)	2025-07-15 04:11:32,564 - INFO -    Calculated spacing: 24.0 m	2025-07-15 04:11:32,564 - INFO - ✅ Using time-based distribution (CSV parameters)	2025-07-15 04:11:32,614 - INFO - ✅ Mapped 97 photos to 3D positions	2025-07-15 04:11:32,618 - INFO - ✅ Generated OpenSfM files in /tmp/opensfm_knsj2rue/opensfm	2025-07-15 04:11:32,618 - INFO -    - exif_overrides.json	2025-07-15 04:11:32,618 - INFO -    - reference_lla.json	2025-07-15 04:11:32,618 - INFO -    - reference.txt	2025-07-15 04:11:32,618 - INFO -    - gps_priors.json	2025-07-15 04:11:32,618 - INFO - 📊 GPS Processing Summary:	2025-07-15 04:11:32,618 - INFO -    Photos: 97	2025-07-15 04:11:32,618 - INFO -    Path length: 2731.8m	2025-07-15 04:11:32,618 - INFO -    Photo spacing: 24.0m	2025-07-15 04:11:32,618 - INFO -    Confidence: 0.90	2025-07-15 04:11:32,620 - INFO - ✅ Created OpenSfM config: /tmp/opensfm_knsj2rue/opensfm/config.yaml	2025-07-15 04:11:32,823 - INFO - ✅ Copied 97 images to OpenSfM	2025-07-15 04:11:32,823 - INFO - 🔄 Running OpenSfM reconstruction...	2025-07-15 04:11:32,823 - INFO - 🔧 Extract image metadata...	2025-07-15 04:11:38,494 - INFO - ✅ Extract image metadata completed	2025-07-15 04:11:38,494 - INFO - 🔧 Detect features...	2025-07-15 04:12:53,181 - INFO - ✅ Detect features completed	2025-07-15 04:12:53,181 - INFO - 🔧 Match features...	2025-07-15 04:26:59,198 - INFO - ✅ Match features completed	2025-07-15 04:26:59,198 - INFO - 🔧 Create tracks...	2025-07-15 04:27:38,718 - INFO - ✅ Create tracks completed	2025-07-15 04:27:38,718 - INFO - 🔧 Reconstruct 3D structure...	2025-07-15 04:53:59,190 - INFO - ✅ Reconstruct 3D structure completed	2025-07-15 04:54:00,371 - INFO - 📊 Reconstruction statistics:	2025-07-15 04:54:00,371 - INFO -    Cameras: 97	2025-07-15 04:54:00,371 - INFO -    3D points: 248093	2025-07-15 04:54:00,371 - INFO -    Registered images (showing up to 20): ['DJI_0580.JPG', 'DJI_0579.JPG', 'DJI_0588.JPG', 'DJI_0589.JPG', 'DJI_0590.JPG', 'DJI_0587.JPG', 'DJI_0591.JPG', 'DJI_0634.JPG', 'DJI_0581.JPG', 'DJI_0635.JPG', 'DJI_0582.JPG', 'DJI_0669.JPG', 'DJI_0667.JPG', 'DJI_0631.JPG', 'DJI_0636.JPG', 'DJI_0586.JPG', 'DJI_0603.JPG', 'DJI_0607.JPG', 'DJI_0637.JPG', 'DJI_0670.JPG']	2025-07-15 04:54:00,371 - INFO - ✅ Reconstruction validated	2025-07-15 04:54:00,419 - INFO - 🔄 Converting to COLMAP format...	2025-07-15 04:54:00,419 - INFO - 🔄 Initializing OpenSfM to COLMAP converter	2025-07-15 04:54:00,419 - INFO -    Input: /tmp/opensfm_knsj2rue/opensfm	2025-07-15 04:54:00,419 - INFO -    Output: /opt/ml/processing/output	2025-07-15 04:54:00,419 - INFO -    Temp COLMAP dir: /tmp/colmap_dbpfgqgn/sparse/0	2025-07-15 04:54:00,419 - INFO -    Final COLMAP dir: /opt/ml/processing/output/sparse/0	2025-07-15 04:54:00,419 - INFO - 🚀 Starting full OpenSfM to COLMAP conversion with train/test split	2025-07-15 04:54:00,419 - INFO - 📁 Created temp COLMAP sparse directory: /tmp/colmap_dbpfgqgn/sparse/0	2025-07-15 04:54:01,568 - INFO - ✅ Loaded OpenSfM reconstruction:	2025-07-15 04:54:01,568 - INFO -    Cameras: 1	2025-07-15 04:54:01,568 - INFO -    Shots: 97	2025-07-15 04:54:01,568 - INFO -    Points: 248093	2025-07-15 04:54:01,568 - INFO - 🔄 Creating train/test split:	2025-07-15 04:54:01,568 - INFO -    Total images: 97	2025-07-15 04:54:01,568 - INFO -    Training images: 77 (79.4%)	2025-07-15 04:54:01,568 - INFO -    Test images: 20 (20.6%)	2025-07-15 04:54:01,569 - INFO - 🔄 Converting 1 cameras to COLMAP format	2025-07-15 04:54:01,569 - INFO - ✅ Generated cameras.txt with 1 cameras	2025-07-15 04:54:01,569 - INFO - 🔄 Converting 97 shots to COLMAP format	2025-07-15 04:54:01,572 - INFO - ✅ Generated images.txt with 97 images	2025-07-15 04:54:01,572 - INFO - 🔄 Converting 248093 points to COLMAP format	2025-07-15 04:54:02,194 - INFO - ✅ Generated points3D.txt with 248093 points	2025-07-15 04:54:02,195 - INFO - 🔄 Creating train reconstruction in: /tmp/colmap_dbpfgqgn/train	2025-07-15 04:54:02,195 - INFO - 🔄 Converting 1 cameras to COLMAP format	2025-07-15 04:54:02,195 - INFO - ✅ Generated cameras.txt with 1 cameras	2025-07-15 04:54:02,195 - INFO - 🔄 Converting 77 shots to COLMAP format	2025-07-15 04:54:02,198 - INFO - ✅ Generated images.txt with 77 images	2025-07-15 04:54:02,198 - INFO - 🔄 Converting 248093 points to COLMAP format	2025-07-15 04:54:02,823 - INFO - ✅ Generated points3D.txt with 248093 points	2025-07-15 04:54:02,824 - INFO - 📸 Copying 77 images for train split:	2025-07-15 04:54:02,826 - INFO -    📄 Copied: DJI_0579.JPG	2025-07-15 04:54:02,828 - INFO -    📄 Copied: DJI_0580.JPG	2025-07-15 04:54:02,831 - INFO -    📄 Copied: DJI_0581.JPG	2025-07-15 04:54:02,833 - INFO -    📄 ... and 74 more images	2025-07-15 04:54:02,992 - INFO - ✅ Copied 77/77 images for train split	2025-07-15 04:54:02,992 - INFO - ✅ train reconstruction: 1 cameras, 77 images, 248093 points	2025-07-15 04:54:02,992 - INFO - 📁 Created in subdirectory: /tmp/colmap_dbpfgqgn/train/0	2025-07-15 04:54:02,992 - INFO - 🔄 Creating test reconstruction in: /tmp/colmap_dbpfgqgn/test	2025-07-15 04:54:02,992 - INFO - 🔄 Converting 1 cameras to COLMAP format	2025-07-15 04:54:02,992 - INFO - ✅ Generated cameras.txt with 1 cameras	2025-07-15 04:54:02,992 - INFO - 🔄 Converting 20 shots to COLMAP format	2025-07-15 04:54:02,993 - INFO - ✅ Generated images.txt with 20 images	2025-07-15 04:54:02,993 - INFO - 🔄 Converting 248093 points to COLMAP format	2025-07-15 04:54:03,618 - INFO - ✅ Generated points3D.txt with 248093 points	2025-07-15 04:54:03,618 - INFO - 📸 Copying 20 images for test split:	2025-07-15 04:54:03,621 - INFO -    📄 Copied: DJI_0656.JPG	2025-07-15 04:54:03,623 - INFO -    📄 Copied: DJI_0657.JPG	2025-07-15 04:54:03,626 - INFO -    📄 Copied: DJI_0658.JPG	2025-07-15 04:54:03,628 - INFO -    📄 ... and 17 more images	2025-07-15 04:54:03,664 - INFO - ✅ Copied 20/20 images for test split	2025-07-15 04:54:03,664 - INFO - ✅ test reconstruction: 1 cameras, 20 images, 248093 points	2025-07-15 04:54:03,664 - INFO - 📁 Created in subdirectory: /tmp/colmap_dbpfgqgn/test/0	2025-07-15 04:54:03,665 - INFO - ✅ Created train/test split reconstructions	2025-07-15 04:54:03,665 - INFO - ☁️ Creating reference point cloud with 248093 points	2025-07-15 04:54:04,142 - INFO - ✅ Generated reference point cloud: /tmp/colmap_dbpfgqgn/dense/sparse_points.ply	2025-07-15 04:54:04,143 - INFO - 📁 Creating final sparse directory: /opt/ml/processing/output/sparse/0	2025-07-15 04:54:04,143 - INFO - ✅ Final sparse directory created successfully: /opt/ml/processing/output/sparse/0	2025-07-15 04:54:04,143 - INFO - 📄 Copied cameras.txt to final location	2025-07-15 04:54:04,143 - INFO - 📄 Copied images.txt to final location	2025-07-15 04:54:04,151 - INFO - 📄 Copied points3D.txt to final location	2025-07-15 04:54:04,322 - INFO - 📁 Copied train reconstruction to: /opt/ml/processing/output/train	2025-07-15 04:54:04,372 - INFO - 📁 Copied test reconstruction to: /opt/ml/processing/output/test	2025-07-15 04:54:04,377 - INFO - 📁 Copied dense directory to final location	2025-07-15 04:54:04,430 - INFO - 🧹 Cleaned up temp directory: /tmp/colmap_dbpfgqgn	2025-07-15 04:54:04,492 - INFO - 🔍 Validation Results:	2025-07-15 04:54:04,492 - INFO -    Cameras: 1	2025-07-15 04:54:04,492 - INFO -    Images: 48	2025-07-15 04:54:04,492 - INFO -    Points: 248093	2025-07-15 04:54:04,492 - INFO -    Train Images: 38	2025-07-15 04:54:04,492 - INFO -    Test Images: 10	2025-07-15 04:54:04,492 - INFO -    Train/Test Split: ✅ EXISTS	2025-07-15 04:54:04,492 - INFO -    Quality Check: ✅ PASSED	2025-07-15 04:54:04,492 - INFO - ✅ Full OpenSfM to COLMAP conversion completed	2025-07-15 04:54:04,492 - INFO - 📊 COLMAP Conversion Results:	2025-07-15 04:54:04,492 - INFO -    Cameras: 1	2025-07-15 04:54:04,492 - INFO -    Images: 48	2025-07-15 04:54:04,492 - INFO -    Points: 248093	2025-07-15 04:54:04,492 - INFO -    Quality Check: ✅ PASSED	2025-07-15 04:54:04,540 - INFO - 🔄 Generating additional artifacts for 3DGS compatibility...	2025-07-15 04:54:06,315 - INFO - ✅ Copied 97 images to output directory for 3DGS training	2025-07-15 04:54:07,394 - INFO - ✅ Generated metadata JSON: /opt/ml/processing/output/sfm_metadata.json	2025-07-15 04:54:07,472 - INFO - ✅ Created stub COLMAP database: /opt/ml/processing/output/database.db	2025-07-15 04:54:07,472 - INFO - ✅ OpenSfM GPS pipeline completed successfully	2025-07-15 04:54:08,058 - INFO - 🧹 Cleanup completed	2025-07-15 04:54:08,058 - INFO - 🏁 Pipeline finished with exit code: 0	============================================================	🔍 VALIDATING OUTPUT	============================================================	🔍 Checking required output files...	✅ /opt/ml/processing/output/sparse/0/cameras.txt (192 bytes)	✅ /opt/ml/processing/output/sparse/0/images.txt (9673 bytes)	✅ /opt/ml/processing/output/sparse/0/points3D.txt (14472929 bytes)	✅ /opt/ml/processing/output/dense/sparse_points.ply (10366444 bytes)	✅ /opt/ml/processing/output/database.db (24576 bytes)	✅ /opt/ml/processing/output/images (97 files)	✅ /opt/ml/processing/output/sfm_metadata.json (301 bytes)	🔍 Validating COLMAP format compatibility...	✅ COLMAP format validation passed	============================================================	📊 PROCESSING STATISTICS	============================================================	📷 Cameras registered: 1	🖼️ Images registered: 48	🖼️ Images copied for 3DGS: 97	🎯 3D points: 248093	✅ Quality check: PASSED (>= 1000 points)	⏱️ Processing time: 2557.48 seconds	📈 Pipeline optimization: GPS-constrained reconstruction	============================================================	🎉 SPACEPORT OPENSFM PROCESSING COMPLETED SUCCESSFULLY!	============================================================	✅ GPS-constrained Structure-from-Motion reconstruction completed	⚡ Enhanced with drone flight path data for improved accuracy	📁 Output files ready for 3D Gaussian Splatting training	🔗 COLMAP format compatibility maintained	📅 Completed at: Tue Jul 15 04:54:08 UTC 2025	============================================================
